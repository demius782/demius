# ä¾§æ ç¼©ç•¥å›¾è‡ªåŠ¨å›é€€åŠŸèƒ½

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

ä¸ºæ‰€æœ‰ä¾§æ ç»„ä»¶çš„ç¼©ç•¥å›¾æ·»åŠ äº†è‡ªåŠ¨å›é€€æœºåˆ¶ï¼Œå½“å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶ä¼šè‡ªåŠ¨ä½¿ç”¨å¤‡ç”¨å›¾ç‰‡ï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒçš„å®Œæ•´æ€§ã€‚

---

## ğŸ¯ æ¶‰åŠç»„ä»¶

### 1. çƒ­é—¨æ–‡ç«  (Popular Posts)
- **æ–‡ä»¶**: `themes/demius/layouts/partials/aside/widgets/popular-posts.html`
- **ç¼©ç•¥å›¾**: `.popular-thumb img`
- **å›é€€æœºåˆ¶**: âœ… å·²å®ç°

### 2. æœ€æ–°æ–‡ç«  (Recent Posts)
- **æ–‡ä»¶**: `themes/demius/layouts/partials/aside/widgets/recent-posts.html`
- **ç¼©ç•¥å›¾**: `.recent-thumb img`
- **å›é€€æœºåˆ¶**: âœ… å·²å®ç°

### 3. ç›¸å…³æ–‡ç«  (Related Posts)
- **æ–‡ä»¶**: `themes/demius/layouts/partials/aside/widgets/related-posts.html`
- **ç¼©ç•¥å›¾**: `.related-thumb img`
- **å›é€€æœºåˆ¶**: âœ… å·²å®ç°

### 4. ç³»åˆ—æ–‡ç«  (Series Posts)
- **æ–‡ä»¶**: `themes/demius/layouts/partials/aside/widgets/series-posts.html`
- **ç¼©ç•¥å›¾**: `.series-post-thumb img`
- **å›é€€æœºåˆ¶**: âœ… å·²å®ç°

### 5. ä½œè€…ä¿¡æ¯ (Author)
- **æ–‡ä»¶**: `themes/demius/layouts/partials/aside/widgets/author.html`
- **å¤´åƒ**: `.aside-avatar img`
- **å›é€€æœºåˆ¶**: âœ… å·²å®ç°ï¼ˆä¹‹å‰å·²æœ‰ï¼‰

---

## ğŸ”§ æŠ€æœ¯å®ç°

### å›é€€é€»è¾‘

æ¯ä¸ªç¼©ç•¥å›¾éƒ½ä½¿ç”¨ä¸‰çº§å›é€€æœºåˆ¶ï¼š

```go
{{ $defaultCover := $.Site.Params.images.defaultCover | default "/img/default-cover.jpg" }}
{{ $fallbackImage := $.Site.Params.images.fallbackImage | default "/img/404.jpg" }}
{{ $cover := .Params.cover | default $defaultCover }}
```

**å›é€€é¡ºåº**ï¼š
1. ä½¿ç”¨æ–‡ç« çš„ `cover` å‚æ•°ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
2. ä½¿ç”¨é…ç½®çš„ `defaultCover`ï¼ˆå¦‚æœæ–‡ç« æ²¡æœ‰ coverï¼‰
3. ä½¿ç”¨ `fallbackImage`ï¼ˆå¦‚æœå‰ä¸¤è€…éƒ½åŠ è½½å¤±è´¥ï¼‰

### HTML å®ç°

```html
<img src="{{ $cover | relURL }}" 
     alt="{{ .Title }}" 
     loading="lazy"
     onerror="this.onerror=null; this.src='{{ $fallbackImage | relURL }}'">
```

**å…³é”®ç‚¹**ï¼š
- `onerror="this.onerror=null; ..."`: é˜²æ­¢æ— é™å¾ªç¯
- `loading="lazy"`: å»¶è¿ŸåŠ è½½ä¼˜åŒ–æ€§èƒ½
- åŠ¨æ€ç”Ÿæˆçš„ `fallbackImage` è·¯å¾„

---

## âš™ï¸ é…ç½®è¯´æ˜

åœ¨ `hugo.toml` ä¸­é…ç½®é»˜è®¤å›¾ç‰‡ï¼š

```toml
[params.images]
  defaultCover = "/img/default-cover.webp"  # æ–‡ç« é»˜è®¤å°é¢å›¾ç‰‡è·¯å¾„
  fallbackImage = "/img/404.jpg"           # å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶çš„å¤‡ç”¨å›¾ç‰‡
```

### é…ç½®é¡¹è¯´æ˜

| é…ç½®é¡¹ | ä½œç”¨ | é»˜è®¤å€¼ |
|--------|------|--------|
| `defaultCover` | æ–‡ç« æ²¡æœ‰å°é¢æ—¶ä½¿ç”¨çš„é»˜è®¤å›¾ç‰‡ | `/img/default-cover.jpg` |
| `fallbackImage` | å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶çš„å¤‡ç”¨å›¾ç‰‡ | `/img/404.jpg` |

---

## ğŸ“Š ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: æ–‡ç« æœ‰å°é¢å›¾
```markdown
---
title: "æˆ‘çš„æ–‡ç« "
cover: "/img/my-cover.jpg"
---
```
**æ˜¾ç¤º**: `/img/my-cover.jpg` â†’ å¦‚æœå¤±è´¥ â†’ `/img/404.jpg`

### åœºæ™¯ 2: æ–‡ç« æ²¡æœ‰å°é¢å›¾
```markdown
---
title: "æˆ‘çš„æ–‡ç« "
---
```
**æ˜¾ç¤º**: `/img/default-cover.webp` â†’ å¦‚æœå¤±è´¥ â†’ `/img/404.jpg`

### åœºæ™¯ 3: å°é¢å›¾URLå¤±æ•ˆ
```markdown
---
title: "æˆ‘çš„æ–‡ç« "
cover: "https://example.com/broken-link.jpg"
---
```
**æ˜¾ç¤º**: `https://example.com/broken-link.jpg` â†’ å¤±è´¥ â†’ `/img/404.jpg`

---

## ğŸ¨ è§†è§‰æ•ˆæœ

### æ­£å¸¸æƒ…å†µ
- æ˜¾ç¤ºæ–‡ç« æŒ‡å®šçš„å°é¢å›¾
- åŠ è½½é€Ÿåº¦å¿«ï¼ˆlazy loadingï¼‰
- è§†è§‰ä½“éªŒå®Œæ•´

### å›¾ç‰‡å¤±æ•ˆæƒ…å†µ
- è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨å›¾ç‰‡
- æ— éœ€æ‰‹åŠ¨å¹²é¢„
- é¿å…ç©ºç™½æˆ–ç ´æŸå›¾æ ‡

---

## âœ… ä¼˜åŠ¿ç‰¹ç‚¹

### 1. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- âœ… æ°¸è¿œä¸ä¼šæ˜¾ç¤ºç ´æŸçš„å›¾ç‰‡
- âœ… è‡ªåŠ¨å›é€€ï¼Œæ— éœ€äººå·¥å¹²é¢„
- âœ… è§†è§‰ä¸€è‡´æ€§å¾—åˆ°ä¿è¯

### 2. æ€§èƒ½ä¼˜åŒ–
- âœ… ä½¿ç”¨ `lazy loading` å»¶è¿ŸåŠ è½½
- âœ… `onerror=null` é˜²æ­¢é”™è¯¯å¾ªç¯
- âœ… å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚

### 3. ç»´æŠ¤å‹å¥½
- âœ… ç»Ÿä¸€çš„å›é€€æœºåˆ¶
- âœ… é›†ä¸­é…ç½®ç®¡ç†
- âœ… æ˜“äºè‡ªå®šä¹‰

### 4. SEOå‹å¥½
- âœ… æ¯ä¸ªå›¾ç‰‡éƒ½æœ‰æ­£ç¡®çš„ `alt` å±æ€§
- âœ… å›¾ç‰‡èµ„æºè·¯å¾„ä½¿ç”¨ `relURL`
- âœ… ç¬¦åˆæ ‡å‡†HTMLè§„èŒƒ

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: å¤‡ç”¨å›¾ç‰‡ä¹ŸåŠ è½½å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: `onerror=null` ä¼šé˜»æ­¢å†æ¬¡è§¦å‘é”™è¯¯å¤„ç†ï¼Œé¿å…æ— é™å¾ªç¯ã€‚å»ºè®®å°†å¤‡ç”¨å›¾ç‰‡æ”¾åœ¨æœ¬åœ° `static` ç›®å½•ï¼Œç¡®ä¿å¯é æ€§ã€‚

### Q2: å¦‚ä½•æ›´æ¢é»˜è®¤å›¾ç‰‡ï¼Ÿ
A: ä¿®æ”¹ `hugo.toml` ä¸­çš„é…ç½®é¡¹ï¼š
```toml
[params.images]
  defaultCover = "/img/my-default.jpg"
  fallbackImage = "/img/my-fallback.jpg"
```

### Q3: å›¾ç‰‡è·¯å¾„æ”¯æŒå¤–é“¾å—ï¼Ÿ
A: æ”¯æŒï¼å¯ä»¥ä½¿ç”¨å®Œæ•´çš„URLï¼š
```toml
[params.images]
  defaultCover = "https://cdn.example.com/default.jpg"
  fallbackImage = "https://cdn.example.com/fallback.jpg"
```

### Q4: ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ `relURL`ï¼Ÿ
A: `relURL` ç¡®ä¿å›¾ç‰‡è·¯å¾„åœ¨ä¸åŒéƒ¨ç½²ç¯å¢ƒï¼ˆæ ¹è·¯å¾„ã€å­ç›®å½•ï¼‰ä¸‹éƒ½èƒ½æ­£ç¡®å·¥ä½œã€‚

### Q5: å¦‚ä½•ç¦ç”¨æŸä¸ªç»„ä»¶çš„ç¼©ç•¥å›¾ï¼Ÿ
A: ä¾§æ ç»„ä»¶ä¼šæ£€æŸ¥æ˜¯å¦æœ‰ `cover`ï¼Œå¦‚æœç§»é™¤ç¼©ç•¥å›¾åŒºåŸŸï¼Œåªéœ€åœ¨æ¨¡æ¿ä¸­åˆ é™¤å¯¹åº”çš„ `<div class="xxx-thumb">` éƒ¨åˆ†å³å¯ã€‚

---

## ğŸš€ æœªæ¥æ”¹è¿›

### è®¡åˆ’ä¸­çš„åŠŸèƒ½
- [ ] æ”¯æŒå¤šç§å¤‡ç”¨å›¾ç‰‡ï¼ˆæŒ‰ä¼˜å…ˆçº§å›é€€ï¼‰
- [ ] æ·»åŠ ç¼©ç•¥å›¾åŠ è½½åŠ¨ç”»
- [ ] æ”¯æŒWebPæ ¼å¼è‡ªåŠ¨æ£€æµ‹å’Œå›é€€
- [ ] å›¾ç‰‡æ‡’åŠ è½½è¿›åº¦æŒ‡ç¤ºå™¨

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.6.1 (2025-10-28)
- âœ… ä¸ºçƒ­é—¨æ–‡ç« ç»„ä»¶æ·»åŠ ç¼©ç•¥å›¾å›é€€
- âœ… ä¸ºæœ€æ–°æ–‡ç« ç»„ä»¶æ·»åŠ ç¼©ç•¥å›¾å›é€€
- âœ… ä¸ºç›¸å…³æ–‡ç« ç»„ä»¶æ·»åŠ ç¼©ç•¥å›¾å›é€€
- âœ… ä¸ºç³»åˆ—æ–‡ç« ç»„ä»¶æ·»åŠ ç¼©ç•¥å›¾å›é€€
- âœ… ç»Ÿä¸€å›é€€é€»è¾‘å’Œé…ç½®ç®¡ç†

---

## ğŸ¯ å½±å“èŒƒå›´

- âœ… ä»…ä¼˜åŒ–ä¾§æ ç»„ä»¶çš„å›¾ç‰‡æ˜¾ç¤º
- âœ… ä¸å½±å“å…¶ä»–æ ·å¼å’ŒåŠŸèƒ½
- âœ… ä¸å½±å“é¡µé¢å¸ƒå±€
- âœ… ä¸ä¿®æ”¹Hugoçš„æœ¬åœ°é¢„è§ˆæœåŠ¡å™¨ç«¯å£

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ä¸»é¢˜ä½¿ç”¨æ–‡æ¡£](demiusä¸»é¢˜ä½¿ç”¨æ–‡æ¡£.md)
- [ä¾§æ é…ç½®æŒ‡å—](aside-configuration.md)
- [å›¾ç‰‡é…ç½®è¯´æ˜](image-configuration.md)

---

**æœ€åæ›´æ–°**: 2025-10-28  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**é€‚ç”¨ç‰ˆæœ¬**: Demius v2.6.1+

